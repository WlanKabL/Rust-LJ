let smartSwitches = {
	startStop: {
		master: {
			id: "startStop.master",
			name: "Start/Stop Master",
			state: false
		}
	},
	smoke: {
		master: {
			id: "smoke.master",
			name: "Smoke Master",
			state: false
		},
		x2: {
			id: "smoke.x2",
			name: "Smoke x2",
			state: false
		},
		x4: {
			id: "smoke.x4",
			name: "Smoke x4",
			state: false
		}
	},
	sirenBlue: {
		master: {
			id: "sirenBlue.master",
			name: "Siren Blue Master",
			state: false
		},
		left: {
			id: "sirenBlue.left",
			name: "Siren Blue Left",
			state: false
		},
		right: {
			id: "sirenBlue.right",
			name: "Siren Blue Right",
			state: false
		}
	},
	sirenRed: {
		master: {
			id: "sirenRed.master",
			name: "Siren Red Master",
			state: false
		},
		left: {
			id: "sirenRed.left",
			name: "Siren Red Left",
			state: false
		},
		right: {
			id: "sirenRed.right",
			name: "Siren Red Right",
			state: false
		}
	},
	strobe: {
		master: {
			id: "strobe.master",
			name: "Strobe Master",
			state: false
		},
		slow: {
			id: "strobe.slow",
			name: "Strobe Slow",
			state: false
		},
		fast: {
			id: "strobe.fast",
			name: "Strobe Fast",
			state: false
		}
	},
	danceFloor: {
		master: {
			id: "danceFloor.master",
			name: "Dance Floor Master",
			state: false
		},
		stage: {
			id: "danceFloor.stage",
			name: "Dance Floor Stage",
			state: false
		},
		room: {
			id: "danceFloor.room",
			name: "Dance Floor Room",
			state: false
		}
	},
	sign: {
		id: "sign",
		name: "Sign",
		state: false
	},
	colorful: {
		master: {
			id: "colorful.master",
			name: "Colorful Master",
			state: false
		},
		red: {
			master: {
				id: "colorful.red.master",
				name: "Colorful Red Master",
				state: false
			},
			row0: {
				id: "colorful.red.row0",
				name: "Colorful Red Row 0",
				state: false
			},
			row1: {
				id: "colorful.red.row1",
				name: "Colorful Red Row 1",
				state: false
			},
			row2: {
				id: "colorful.red.row2",
				name: "Colorful Red Row 2",
				state: false
			},
			row3: {
				id: "colorful.red.row3",
				name: "Colorful Red Row 3",
				state: false
			},
			row4: {
				id: "colorful.red.row4",
				name: "Colorful Red Row 4",
				state: false
			},
			row5: {
				id: "colorful.red.row5",
				name: "Colorful Red Row 5",
				state: false
			}
		},
		blue: {
			master: {
				id: "colorful.blue.master",
				name: "Colorful Blue Master",
				state: false
			},
			row0: {
				id: "colorful.blue.row0",
				name: "Colorful Blue Row 0",
				state: false
			},
			row1: {
				id: "colorful.blue.row1",
				name: "Colorful Blue Row 1",
				state: false
			},
			row2: {
				id: "colorful.blue.row2",
				name: "Colorful Blue Row 2",
				state: false
			},
			row3: {
				id: "colorful.blue.row3",
				name: "Colorful Blue Row 3",
				state: false
			},
			row4: {
				id: "colorful.blue.row4",
				name: "Colorful Blue Row 4",
				state: false
			},
			row5: {
				id: "colorful.blue.row5",
				name: "Colorful Blue Row 5",
				state: false
			}
		},
		green: {
			master: {
				id: "colorful.green.master",
				name: "Colorful Green Master",
				state: false
			},
			row0: {
				id: "colorful.green.row0",
				name: "Colorful Green Row 0",
				state: false
			},
			row1: {
				id: "colorful.green.row1",
				name: "Colorful Green Row 1",
				state: false
			},
			row2: {
				id: "colorful.green.row2",
				name: "Colorful Green Row 2",
				state: false
			},
			row3: {
				id: "colorful.green.row3",
				name: "Colorful Green Row 3",
				state: false
			},
			row4: {
				id: "colorful.green.row4",
				name: "Colorful Green Row 4",
				state: false
			},
			row5: {
				id: "colorful.green.row5",
				name: "Colorful Green Row 5",
				state: false
			}
		},
		yellow: {
			master: {
				id: "colorful.yellow.master",
				name: "Colorful Yellow Master",
				state: false
			},
			row0: {
				id: "colorful.yellow.row0",
				name: "Colorful Yellow Row 0",
				state: false
			},
			row1: {
				id: "colorful.yellow.row1",
				name: "Colorful Yellow Row 1",
				state: false
			},
			row2: {
				id: "colorful.yellow.row2",
				name: "Colorful Yellow Row 2",
				state: false
			},
			row3: {
				id: "colorful.yellow.row3",
				name: "Colorful Yellow Row 3",
				state: false
			},
			row4: {
				id: "colorful.yellow.row4",
				name: "Colorful Yellow Row 4",
				state: false
			},
			row5: {
				id: "colorful.yellow.row5",
				name: "Colorful Yellow Row 5",
				state: false
			}
		},
		pink: {
			master: {
				id: "colorful.pink.master",
				name: "Colorful Pink Master",
				state: false
			},
			row0: {
				id: "colorful.pink.row0",
				name: "Colorful Pink Row 0",
				state: false
			},
			row1: {
				id: "colorful.pink.row1",
				name: "Colorful Pink Row 1",
				state: false
			},
			row2: {
				id: "colorful.pink.row2",
				name: "Colorful Pink Row 2",
				state: false
			},
			row3: {
				id: "colorful.pink.row3",
				name: "Colorful Pink Row 3",
				state: false
			},
			row4: {
				id: "colorful.pink.row4",
				name: "Colorful Pink Row 4",
				state: false
			},
			row5: {
				id: "colorful.pink.row5",
				name: "Colorful Pink Row 5",
				state: false
			}
		}
	}
};

const panelAll = document.getElementById("panel-all");
const panelMaster = document.getElementById("panel-master");

const updateHz = 60;
const updateMs = Math.floor(1 / updateHz * 1000);


function init() {

	function createButton(smartSwitch, panel) {
		const childNode = document.createElement("div");
		childNode.innerHTML = smartSwitch.name;  // Display the name property
		childNode.classList.add("switch");
		childNode.classList.add(smartSwitch.state);
		childNode.id = smartSwitch.id;  // Set the ID for the element
		childNode.addEventListener("click", event => {
			smartSwitch.state = !smartSwitch.state;
			console.log(`${smartSwitch.name} changed to ${smartSwitch.state}`)
			childNode.classList = `switch ${smartSwitch.state}`
			console.log(smartSwitches
				
			)
		});

		panel.appendChild(childNode);  // Append to the appropriate panel
	}

	function traverseAndCreateButtons(switchGroup, panelMaster, panelAll) {
		for (const key in switchGroup) {
			const item = switchGroup[key];

			// If it's an object with further nested objects, traverse it
			if (typeof item === "object" && !item.id) {
				traverseAndCreateButtons(item, panelMaster, panelAll);
			} else {
				// Check if it's a "master" switch
				if (item.id.includes("master")) {
					createButton(item, panelMaster);  // Append to the master panel
				} else {
					createButton(item, panelAll);  // Append to the general panel
				}
			}
		}
	}

	// Traverse through the smartSwitches object and create buttons
	traverseAndCreateButtons(smartSwitches, panelMaster, panelAll);

}


init();